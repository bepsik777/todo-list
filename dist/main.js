(()=>{"use strict";const e=(e,t,o,c)=>({finished:!1,title:e,description:t,dueDate:o,priority:c}),t=function(e){return{todosArray:[],title:e,rendered:!1}},o={projectsArray:[],activeProject:void 0,createProject:function(e,t,o){const c=e(t);return o.push(c),c},removeProject:(e,t)=>{t.splice(e,1)},switchProject:function(e,t){this.activeProject=t[e]},createTodo:(e,t,o,c,n,r)=>{const d=t(o,c,n,r);return e.push(d),d},removeTodo:(e,t)=>{t.splice(e,1)},editTodo:(e,t,o,c)=>{e.title=t,e.description=o,e.priority=c}},c=(()=>{const t=document.querySelector("#title"),c=document.querySelector("#description"),n=document.querySelector("#end-date"),r=document.querySelector("#priority"),d=[];function a(){document.querySelectorAll(".example-todo").forEach((e=>{e.remove()}));const e=document.querySelector(".active-project");o.activeProject.todosArray.forEach((t=>{const c=document.createElement("div"),n=document.createElement("div"),r=document.createElement("input"),i=document.createElement("h3"),s=document.createElement("div"),l=function(){const e=document.createElement("button");return e.textContent="X",e.classList.add("delete-todo-button"),d.push(e),e.dataset.id=d.indexOf(e),e.addEventListener("click",(e=>{e.target.dataset.id=e.target.parentElement.parentElement.dataset.id;const t=e.target.dataset.id;o.activeProject.todosArray.splice(t,1),a(),console.log(e.target.dataset.id)})),e}(),u=function(){const e=document.createElement("button");return e.textContent="e",e.classList.add("edit-button"),e.addEventListener("click",(e=>{console.log("hello, i am edit piath"),function(e){const t=e.target.parentElement.parentElement,c=o.activeProject.todosArray[t.dataset.id];if(t.classList.toggle("edited-todo"),t.classList.contains("edited-todo")){const n=t.querySelector(".edit-button"),r=t.querySelector(".todo-title"),d=document.createElement("input");d.type="text",d.placeholder=r.textContent;const i=document.createElement("textarea");i.classList.add("edit-description"),i.maxLength=150;const s=document.createElement("select");s.classList.add("edit-priority");const l=document.createElement("option");l.value=0,l.textContent="Low";const u=document.createElement("option");u.value=1,u.textContent="Medium";const p=document.createElement("option");p.value=2,p.textContent="High",s.append(l,u,p);const m=document.createElement("button");m.textContent="s",m.addEventListener("click",(()=>{o.editTodo(c,d.value,i.value,s.value),a()})),t.append(i,s),r.replaceWith(d),n.replaceWith(m),console.log(d),console.log(c),e.target.textContent="s"}else t.classList.contains("edited-todo")||(e.target.textContent="e")}(e)})),e}(),p=function(){const e=document.createElement("button");return e.textContent="â†“",e.classList.add("expand-button"),e.addEventListener("click",(e=>{e.target.dataset.id=e.target.parentElement.parentElement.dataset.id,function(e){const t=e.target.parentElement.parentElement;if(t.classList.toggle("active-todo"),!0===t.classList.contains("active-todo")){const e=document.createElement("div"),c=document.createElement("p"),n=document.createElement("div");e.classList.add("description"),n.classList.add("priority-wrapper"),c.textContent=o.activeProject.todosArray[t.dataset.id].description,n.textContent=o.activeProject.todosArray[t.dataset.id].priority,t.append(e),t.append(n),e.append(c)}else if(!1===t.classList.contains("active-todo")){const e=document.querySelector(".description"),t=document.querySelector(".priority-wrapper");e.remove(),t.remove()}}(e)})),e}();c.classList.add("example-todo"),c.dataset.id=o.activeProject.todosArray.indexOf(t),n.classList.add("check-container"),i.classList.add("todo-title"),s.classList.add("icons-container"),r.id="finished",r.type="checkbox",r.name="checkbox",i.textContent=t.title,e.append(c),c.append(n,i,s),n.append(r),s.append(l),s.append(u),s.append(p)})),console.log(o.activeProject.todosArray)}return{renderTodos:a,domCreateTodo:function(){const d=o.activeProject.todosArray,a=t.value,i=c.value,s=n.value,l=r.value;o.createTodo(d,e,a,i,s,l)}}})(),n=(()=>{const e=document.getElementById("create-project-button"),n=document.querySelector(".add-project"),r=document.getElementById("project-title"),d=document.querySelector(".projects-list"),a=document.querySelector(".create-todo-button"),i=[];function s(){o.projectsArray.forEach((e=>{if(!1===e.rendered){const t=document.createElement("li"),c=function(e){const t=document.createElement("p");return t.textContent=e.title,t.addEventListener("click",(e=>{!function(e){e.target.dataset.id=e.target.nextSibling.dataset.id,o.switchProject(e.target.dataset.id,o.projectsArray),console.log(o.activeProject)}(e),l(),console.log(o.activeProject)})),t}(e),n=(()=>{const e=document.createElement("button");return i.push(e),e.textContent="Delete",e.classList.add("delete-project-button"),e.dataset.id=i.indexOf(e),e.addEventListener("click",(e=>{const t=document.querySelector(".active-project");o.projectsArray[e.target.dataset.id]===o.activeProject&&t.remove(),o.removeProject(e.target.dataset.id,o.projectsArray),i.splice(e.target.dataset.id,1),e.target.parentNode.remove(),document.querySelectorAll(".delete-project-button").forEach((e=>{e.dataset.id=i.indexOf(e)})),console.log(o.projectsArray)})),e})();d.append(t),t.appendChild(c),t.appendChild(n),e.rendered=!0}}))}function l(){const e=document.querySelector(".main"),t=document.querySelector(".active-project"),n=document.createElement("div"),r=document.createElement("h2");console.log(t),null!==t&&t.remove(),void 0!==o.activeProject&&(n.classList.add("active-project"),r.textContent=o.activeProject.title,r.classList.add("rendered-project-title"),e.appendChild(n),n.appendChild(r),c.renderTodos())}return e.addEventListener("click",(()=>{""!==r.value&&(function(){const e=r.value;o.createProject(t,e,o.projectsArray),console.log(o.projectsArray)}(),r.value="",s(),e.classList.toggle("hidden"),r.classList.toggle("hidden"))})),n.addEventListener("click",(()=>{e.classList.toggle("hidden"),r.classList.toggle("hidden")})),a.addEventListener("click",(e=>{e.preventDefault(),c.domCreateTodo(),l()})),{renderProjectList:s,renderActiveProject:l}})();o.createProject(t,"hello",o.projectsArray),o.switchProject(0,o.projectsArray);const r=o.createTodo(o.activeProject.todosArray,e,"project one","this is project one",new Date(2023,5,5),3);n.renderProjectList(),n.renderActiveProject(),console.log(r),console.log(o.activeProject)})();